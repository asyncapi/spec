channels:
  pingStatic: # dedicated channels so we dont need message filter on level operation
    address: '/'
    correlationId:
      location: '$message.header#/corelationId'
    messages:
      ping:
        $ref: '#/components/messages/ping'     
  pongStatic:
    address: '/'
    correlationId:
      location: '$message.header#/corelationId'
    messages:
      pong:
        $ref: '#/components/messages/pong' 
      dontWork:
        $ref: '#/components/messages/genericError'

  pingDynamic:
    address: '/'
    replyAddress:
      location: '$message.header#/replyTo'
    correlationId: # operation will be mandetory when `correlationId` should be used for tracing
      location: '$message.header#/corelationId'
    messages:
      ping:
        $ref: '#/components/messages/ping'     
  pongDynamic:
    address: null # will be used from ping.replyAddress
    correlationId:
      location: '$message.header#/corelationId'
    messages:
      pong:
        $ref: '#/components/messages/pong' 
      dontWork:
        $ref: '#/components/messages/genericError'


operations:
  requestStatic:
    channel:
      $ref: '#/channels/pingStatic'
    reply:
      channel:
        $ref: '#/channels/pongStatic'
  requestDynamic:
    channel:
      $ref: '#/channels/pingDynamic'
    reply:
      channel:
        $ref: '#/channels/pongDynamic'
    
components:
  messages:
    ping:
      headers: ...
      payload: ... 
    pong:
      headers: ...
      payload: ... 
    genericError:
      headers: ...
      payload: ... 