channels:
  root:
    address: '/'
    messages:
      pingStatic:
        $ref: '#/components/messages/pingStatic'
      pingDynamic:
        $ref: '#/components/messages/pingDynamic'
      pong:
        $ref: '#/components/messages/pong'
      dontWork:
        $ref: '#/components/messages/genericError'
        
  replyToPing:
    address: null
    messages:
      pong:
        $ref: '#/components/messages/pong'
      dontWork:
        $ref: '#/components/messages/genericError'
operations:
  requestStatic:
    channel: 
      $ref: '#/channels/root'
    messages:
      - $ref: '#/channels/root/messages/pingStatic'
  requestDynamic:
    channel: 
      $ref: '#/channels/rootPing'
    messages:
      - $ref: '#/channels/root/messages/pingDynamic'
components:
  messages:
    pingStatic:
      headers: ...
      correlationId: 
        location: '$message.header#/correlationId'
      replyChannel: 
        $ref: '#/channels/replyToPing'
      payload: ... 
    pingDynamic:
      headers: ...
      correlationId: 
        location: '$message.header#/correlationId'
      replyChannel: 
        $ref: '#/channels/replyToPing' # dedicated channel referenced from message
        location: '$message.header#/replyTo'
      payload: ... 
    pong:
      headers: ...
      correlationId: 
        location: '$message.header#/correlationId'
      payload: ... 
    genericError:
      headers: ...
      correlationId: 
        location: '$message.header#/correlationId'
      payload: ... 